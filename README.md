## Веб-интерфейс
Доступен по ссылке — https://rytn.github.io/y2/

**файлы:**

* `index.html`— страница с расписанием и формами редактирования;
* `css/styles.css` — стили;
* `js/samples.js` — заготовки лекций, аудиторий и школ, котороые при первом открытии страницы сохраняются в localStorage и отображаются на экране;
* `js/interface.js` — функции для отображения расписания на странице;

## Хранение данных
Для хранения данных о лекциях, аудиториях и школах используется локальное хранилище браузера (`localStorage`), что позволяет отказаться от сервера. В `localStorage` данные сохраняются после обновления страниц и закрытия браузера. В рамках задания этого достаточно.

**В `localStorage` данные хранятся в следующем виде:**

1. информация о лекциях хранится в массиве `lectures`, каждый элемент которого это объект со свойствами: `date` (дата и время), `title` (название лекции), `lecturer` (лектор — объект со свойствами `name` и `about`), `auditorium` (название аудитории), `school` (аббревиатура школы).
2. информация об аудиториях и школах в ассоциативных массивах:

    * `auditoriums` — названию аудитории соответствует вместимость
    * `auditoriumAddresses` — названию аудитории соответствует адрес
    * `auditoriumsLoad` — хранит информацию о загруженности аудитории в определенное время
    * `schools` — названию школы соответствует количество студентов в ней
    * `schoolsAcronyms` — аббревиатуре школы соответствует ее полное название

**Пример содержания `localStorage`:**
```
auditoriums: "{"2.Ствола": 40, "4.The Beatles": 60}"
auditoriumsAddresses: "{"2.Ствола": "ул. Льва Толстого, д.16", "4.The Beatles": "ул. Льва Толстого, д.16"}"
auditoriumsLoad: "{"4.The BeatlesThu Oct 20 2016 19:00:00 GMT+0300 (MSK)": 50}"
schools: "{"Школа разработки интерфейсов": 50}"
schoolsAcronyms: "{"ШРИ": "Школа разработки интерфейсов"}"
lectures: "[{
    date: "2016/10/20 19:00",
    title: "Адаптивная вёрстка",
    lecturer: {
        name: "Дмитрий Душкин",
        about: "Кандидат технических наук, научный сотрудник ИПУ РАН с 2008 по 2013. Пришёл в Яндекс.Картинки в 2014 году, отвечал за мобильную версию и рост производительности сервиса. В 2016 перешёл в Yandex Data Factory, где разрабатывает интерфейсы и дизайн веб-приложений для B2B."
    },
    auditorium: "4.The Beatles",
    school: "ШРИ"
}]"
```

## Описание библиотеки
**файлы:**

* `js/schedule-api.js`

Предполагается, что все аргументы верны перед вызовом функции.

#### `addAuditorium(name, address, capacity)`
**параметры:**

* name (String) — название;
* address (String) — адрес;
* capacity (Number) ­— вместимость;

Добавляет информацию об аудитории в локальное хранилище. Если аудитория с таким названием уже есть, генерируется ошибка.

#### `addSchool(name, studentsNumber)`
**параметры:**

* name (String) — название;
* studentsNumber (Number) — количество студентов;

Добавляет информацию о школе в локальное хранилище. Если школа с таким названием уже есть, генерируется ошибка.

#### `addLecture(datetime, title, lecturer, auditorium, school)`
**параметры:**

* datetime (Date) — дата и время проведения лекции;
* title (String) — тема лекци;
* lecturer (Object) — информация о лекторе: объект со свойствами name (имя лектора) и about (информация о лекторе);
* auditorium (String) — название аудитории;
* school (String) — аббревиатура школы или, если лекция для нескольких школ, аббревиатуры школ через запятую;

Добавляет информацию о лекции в локальное хранилище, сохраняет информацию о загруженности этой аудитории в это время. Перед добавлением проверяется, может ли вместить эта аудитория столько человек, не ведет ли этот лектор в это же время другую лекцию, не читается ли в это время другая лекция для этой школы, не проводится ли в этой аудитории в это время другая лекция. В случае неуспешности проверки генерируется ошибка.

#### `editAuditorium(oldName, newName, newAddress, newCapacity)`
**параметры:**

* oldName (String) — старое название;
* newName (String) — новое название;
* newAddress (String) — новый адрес;
* newCapacity (Number) — новая вместимость;

Изменяет информацию об аудитории в локальном хранилище. Перед изменением проверяет, существует ли аудитория с таким названием и вместит ли аудитория с новой вместимостью то количество студентов, для которых уже запланированы лекции в этой аудитории. В случае неуспешности проверки генерируется ошибка.

#### `editSchool(oldName, newName, newNumber)`
**параметры:**

* oldName (String) — старое название (аббревиатура);
* newName (String) — новое название;
* newNumber (Number) — новое количество студентов;

Изменяет информацию о школе в локальном хранилище. Перед изменением проверяет, существует ли школа с таким названием и вместят ли аудитории, в которых уже запланированы лекции для этой школы, новое количество студентов. В случае неуспешности проверки генерируется ошибка.

#### `editLecture(oldTitle, newDateTime, newTitle, newLecturer, newAuditorium, newSchool)`
**параметры:**

* oldTitle (String) — старое название;
* newDateTime (Date) — новая дата и время;
* newTitle (String) — новая тема;
* newLecturer (Object) — новый лектор: объект со свойствами name (имя лектора) и about (информация о лекторе);
* newAuditorium (String) — новая аудитория;
* newSchool (String) — новая школа;

Изменяет информацию о лекции в локальном хранилище, сохраняет информацию о загруженности аудитории в это время. Перед изменением проверяется, может ли вместить эта аудитория столько человек, не ведет ли этот лектор в это же время другую лекцию, не читается ли в это время другая лекция для этой школы, не проводится ли в этой аудитории в это время другая лекция. В случае неуспешности проверки генерируется ошибка.

#### `getLecturesInInterval(startDate, endDate, auditorium, school)`
**параметры:**

* startDate (Date) — начальная дата и время;
* endDate (Date) — конечная дата и время;
* auditorium (String) — название аудитории;
* school (String) — название школы;

Возвращает массив лекций, которые проводятся между определенными датами включительно для определенной школы в определенной аудитории. Если значение auditorium 'любая', то возвращаются лекции для всех аудиторий. Если значение school 'любая', то возвращаются лекции для всех школ.

#### `checkLecture(datetime, auditorium, school, lecturer)`
**параметры:**

* datetime (Date) — дата и время проведения лекции;
* auditorium (String) — название аудитории№
* school (String) — аббревиатура школы;
* lecturer (String) — имя лектора;

Проверяет не ведет ли этот лектор в это же время другую лекцию, не читается ли в это время другая лекция для этой школы, не проводится ли в этой аудитории в это время другая лекция. В случае неуспешности проверки генерируется ошибка.

#### `checkCapacity(auditorium, school)`
**параметры:**

* auditorium (String) — название аудитории;
* school (String) — аббревиатура школы или аббревиатуры школ нескольких школ через запятую;

Проверяет вместит ли эта аудитория количество студентов из этих школ. Если нет, то генерируется ошибка. Если да, то возвращает количество студентов.

#### `isBetweenDates(date, min, max)`
**параметры:**

* date (Date) — дата;
* min (Date) — дата "слева";
* max (Date) — дата "справа";

Проверяет находится ли дата date между min и max включительно. Если да, то возвращает true, иначе — false.

#### `makeAcronym(str)`
**параметры:**

* str (String) ­— строка;

Возвращает строку, все буквы которой заглавные, состоящую из первых букв слов строки str.


## Пример использования
Пусть `localStorage` находится в следующем состоянии:
```
auditoriums: "{"2.Ствола": 40, "4.The Beatles": 60}"
auditoriumsAddresses: "{"2.Ствола": "ул. Льва Толстого, д.16", "4.The Beatles": "ул. Льва Толстого, д.16"}"
auditoriumsLoad: "{"4.The BeatlesThu Oct 20 2016 19:00:00 GMT+0300 (MSK)": 50}"
schools: "{"Школа разработки интерфейсов": 50}"
schoolsAcronyms: "{"ШРИ": "Школа разработки интерфейсов"}"
lectures: "[{
    date: "2016/10/20 19:00",
    title: "Адаптивная вёрстка",
    lecturer: {
        name: "Дмитрий Душкин",
        about: "Кандидат технических наук, научный сотрудник ИПУ РАН с 2008 по 2013. Пришёл в Яндекс.Картинки в 2014 году, отвечал за мобильную версию и рост производительности сервиса. В 2016 перешёл в Yandex Data Factory, где разрабатывает интерфейсы и дизайн веб-приложений для B2B."
    },
    auditorium: "4.The Beatles",
    school: "ШРИ"
}]"
```

##### Добавим школу:
```javascript
var name = 'Школа мобильного дизайна';
var studentsNumber = 40;
addSchool(name, studentsNumber);
```
**Изменения в `localStorage`:**
```
schools: "{"Школа разработки интерфейсов":50,"Школа мобильного дизайна":40}"
schoolsAcronyms: "{"ШРИ":"Школа разработки интерфейсов","ШМД":"Школа мобильного дизайна"}"
```

##### Добавим аудиторию:
```javascript
var name = '4.Апрель';
var address = 'ул. Льва Толстого, д.16';
var capacity = 100;
addAuditorium(name, address, capacity);
```
**Изменения в localStorage:**
```
auditoriums: "{"2.Ствола":40,"4.The Beatles":60,"4.Апрель":100}"
auditoriumsAddresses: "{"2.Ствола":"ул. Льва Толстого, д.16","4.The Beatles":"ул. Льва Толстого, д.16","4.Апрель":"ул. Льва Толстого, д.16"}"
```

##### Добавим лекцию:
```javascript
var datetime = new Date('2016/11/24 19:00');
var title = 'Природа операционных систем';
var lecturer = { name: 'Николай Васюнин', about: 'Пришёл в Яндекс в 2014 году. Дизайнер продукта в музыкальных сервисах компании, участник команды разработки Яндекс.Радио.' };
var auditorium = '4.Апрель';
var school = 'ШРИ,ШМД';
addLecture(datetime, title, lecturer, auditorium, school);
```
**Изменения в localStorage:**
```
auditoriumsLoad: "{"4.The BeatlesThu Oct 20 2016 19:00:00 GMT+0300 (MSK)":50,"4.АпрельThu Nov 24 2016 19:00:00 GMT+0300 (MSK)":90}"
lectures: "[{"date":"2016-10-20T16:00:00.000Z","title":"Адаптивная вёрстка","lecturer":{"name":"Дмитрий Душкин","about":"Кандидат технических наук, научный сотрудник ИПУ РАН с 2008 по 2013. Пришёл в Яндекс.Картинки в 2014 году, отвечал за мобильную версию и рост производительности сервиса. В 2016 перешёл в Yandex Data Factory, где разрабатывает интерфейсы и дизайн веб-приложений для B2B."},"auditorium":"4.The Beatles","school":"ШРИ"},{"date":"2016-11-24T16:00:00.000Z","title":"Природа операционных систем","lecturer":{"name":"Николай Васюнин","about":"Пришёл в Яндекс в 2014 году. Дизайнер продукта в музыкальных сервисах компании, участник команды разработки Яндекс.Радио."},"auditorium":"4.Апрель","school":"ШРИ,ШМД"}]"
```

##### Изменим информацию о школе:
```javascript
var oldName = 'ШРИ';
var newName = 'Школа интерфейсной разработки';
var newNumber = 52;
editSchool(oldName, newName, newNumber);
```
**Изменения в localStorage:**
```
schools: "{"Школа мобильного дизайна":40,"Школа интерфейсной разработки":52}"
schoolsAcronyms: "{"ШМД":"Школа мобильного дизайна","ШИР":"Школа интерфейсной разработки"}"
```

##### Изменим информации об аудитории:
```javascript
var oldName = '2.Ствола';
var newName = '2.Башни';
var newAddress = 'ул. Льва Толстого, д.16';
var newCapacity = 110;
editAuditorium(oldName, newName, newAddress, newCapacity);
```
**Изменения в localStorage:**
```
auditoriums: "{"4.The Beatles":60,"4.Апрель":100," 2.Башни":110}"
auditoriumsAddresses: "{"4.The Beatles":"ул. Льва Толстого, д.16","4.Апрель":"ул. Льва Толстого, д.16"," 2.Башни":"ул. Льва Толстого, д.16"}"
```

##### Изменим информацию о лекции:
```javascript
var oldTitle = 'Адаптивная вёрстка';
var datetime = new Date('2016/10/21 16:30');
var title = 'Адаптивная вёрстка';
var lecturer = { name: 'Дмитрий Душкин', about: 'Кандидат технических наук, научный сотрудник ИПУ РАН с 2008 по 2013. Пришёл в Яндекс.Картинки в 2014 году' };
var school = 'ШИР,ШМД';
var auditorium = '2.Башни';
editLecture(oldTitle, datetime, title, lecturer, auditorium, school)
```
**Изменения в localStorage:**
```
auditoriumsLoad: "{"4.The BeatlesThu Oct 20 2016 19:00:00 GMT+0300 (MSK)":50,"4.АпрельThu Nov 24 2016 19:00:00 GMT+0300 (MSK)":90,"2.БашниFri Oct 21 2016 16:30:00 GMT+0300 (MSK)":92}"
lectures: "[{"date":"2016-11-24T16:00:00.000Z","title":"Природа операционных систем","lecturer":{"name":"Николай Васюнин","about":"Пришёл в Яндекс в 2014 году. Дизайнер продукта в музыкальных сервисах компании, участник команды разработки Яндекс.Радио."},"auditorium":"4.Апрель","school":"ШИР,ШМД"},{"date":"2016-10-21T13:30:00.000Z","title":"Адаптивная вёрстка","lecturer":{"name":"Дмитрий Душкин","about":"Кандидат технических наук, научный сотрудник ИПУ РАН с 2008 по 2013. Пришёл в Яндекс.Картинки в 2014 году"},"auditorium":"2.Башни","school":"ШМД,ШИР"}]"
```

##### Получим лекции, которые читаются в период между 15 сентября 2016 года и 2 ноября 2016 года и проходят в аудитории '2.Башни':
```javascript
var startDate = new Date('2016/9/15 00:00');
var endDate = new Date('2016/11/2 23:59');
var auditorium = '2.Башни';
var school = 'любая';
var lectures = getLecturesInInterval(startDate, endDate, auditorium, school);
```
**Содержимое lectures:**
```javascript
[{"date":"2016-10-21T13:30:00.000Z","title":"Адаптивная вёрстка","lecturer":{"name":"Дмитрий Душкин","about":"Кандидат технических наук, научный сотрудник ИПУ РАН с 2008 по 2013. Пришёл в Яндекс.Картинки в 2014 году"},"auditorium":"2.Башни","school":"ШМД,ШИР"}]
```
`JSON.stringify()` изменяет формат представления даты и времени, поэтому перед тем, как показать лекцию в расписании, нужно конвертировать значение `date` в объект JavaScript типа `Date`: `new Date(date)`.
