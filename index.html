<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Расписание</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/schedule-api.js"></script>
</head>

<body>
    <div class="container">
        <div class="edit-interface">
            <form>
                <strong>расписание в заданный интервал</strong>
                <br> аудитория
                <br>
                <select id="auditoriumSelect"></select>
                <br> начало:
                <br>
                <select id="startDay">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                </select>
                <select id="startMonth">
                    <option value="jan">январь</option>
                    <option value="feb">февраль</option>
                    <option value="mar">март</option>
                    <option value="apr">апрель</option>
                    <option value="may">май</option>
                    <option value="jun">июнь</option>
                    <option value="jul">июль</option>
                    <option value="aug">август</option>
                    <option value="sep">сентябрь</option>
                    <option value="oct">октябрь</option>
                    <option value="nov">ноябрь</option>
                    <option value="dec">декабрь</option>
                </select>
                <select id="startYear">
                    <option value="2015">2015</option>
                    <option value="2016">2016</option>
                    <option value="2017">2017</option>
                </select>
                <br>конец:
                <br>
                <select id="endDay">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                </select>
                <select id="endMonth">
                    <option value="jan">январь</option>
                    <option value="feb">февраль</option>
                    <option value="mar">март</option>
                    <option value="apr">апрель</option>
                    <option value="may">май</option>
                    <option value="jun">июнь</option>
                    <option value="jul">июль</option>
                    <option value="aug">август</option>
                    <option value="sep">сентябрь</option>
                    <option value="oct">октябрь</option>
                    <option value="nov">ноябрь</option>
                    <option value="dec">декабрь</option>
                </select>
                <select id="endYear">
                    <option value="2015">2015</option>
                    <option value="2016">2016</option>
                    <option value="2017">2017</option>
                </select>
                <input type="button" value="показать" onclick="callDisplayAuditoriumDateInterval()">
            </form>
            <form>
                <strong>добавить лекцию</strong>
                <br>дата:
                <br>
                <select id="lectureDay">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                </select>
                <select id="lectureMonth">
                    <option value="jan">январь</option>
                    <option value="feb">февраль</option>
                    <option value="mar">март</option>
                    <option value="apr">апрель</option>
                    <option value="may">май</option>
                    <option value="jun">июнь</option>
                    <option value="jul">июль</option>
                    <option value="aug">август</option>
                    <option value="sep">сентябрь</option>
                    <option value="oct">октябрь</option>
                    <option value="nov">ноябрь</option>
                    <option value="dec">декабрь</option>
                </select>
                <select id="lectureYear">
                    <option value="2015">2015</option>
                    <option value="2016">2016</option>
                    <option value="2017">2017</option>
                </select>
                <br>время:
                <br>
                <select id="lectureHour"></select>
                :
                <select id="lectureMinute"></select>
                <br>название:
                <br>
                <input id="lectureTitle" type="text">
                <br>лектор:
                <br>
                <input id="lecturerName" type="text">
                <br>информация о лекторе:
                <br>
                <input id="lecturerAbout" type="text">
                <br>школа:
                <br>
                <select id="lectureSchool"></select>
                <br>аудитория
                <br>
                <select id="lectureAuditorium"></select>
                <br>
                <input type="button" value="добавить" onclick="callAddLecture()">
            </form>
        </div>
        <div id="schedule" class="schedule">
            <h1>Доклады</h1>
            <div id="oct2016" class="schedule-month">
                <div class="schedule-month-heading">
                    <span>октябрь 2016</span>
                </div>
                <table class="schedule-line">
                    <tr>
                        <td class="schedule-line__datetime">
                            <span class="schedule-line__datetime__date">20</span>
                            <span class="schedule-line__datetime__time">19:00</span>
                        </td>
                        <td class="schedule-line__lecture schedule-line__lecture--past">
                            <div class="schedule-line__lecture__title">
                                <a href="#">Адаптивная вёрстка</a>
                            </div>
                            <div class="schedule-line__lecturer">
                                <div id="lecturer0" class="tooltip tooltip--right">
                                    Дмитрий Душкин
                                    <span class="tooltiptext">Кандидат технических наук, научный сотрудник ИПУ РАН с
                  2008 по 2013. Пришёл в Яндекс.Картинки в 2014 году, отвечал за мобильную версию
                  и рост производительности сервиса. В 2016 перешёл в Yandex Data Factory, где
                  разрабатывает интерфейсы и дизайн веб-приложений для B2B.</span>
                                </div>
                            </div>
                        </td>
                        <td class="schedule-line__auditorium">
                            <div class="tooltip tooltip--left">
                                <div class="auditorium">4.The Beatles</div>
                                <span class="tooltiptext">Аудитория</span>
                            </div>
                        </td>
                        <td class="schedule-line__school">
                            <div id="school0" class="tooltip tooltip--left">
                                <div class='school'>ШРИ</div>
                                <span class="tooltiptext">Школа разработки интерфейсов</span>
                            </div>
                        </td>
                    </tr>
                </table>
                <table class="schedule-line">
                    <tr>
                        <td class="schedule-line__datetime">
                            <span class="schedule-line__datetime__date">27</span>
                            <span class="schedule-line__datetime__time">18:00</span>
                        </td>
                        <td class="schedule-line__lecture schedule-line__lecture--past">
                            <div class="schedule-line__lecture__title">
                                <a href="#">Работа с сенсорным пользовательским вводом</a>
                            </div>
                            <div class="schedule-line__lecturer">
                                <div id="lecturer1" class="tooltip tooltip--right">
                                    Дмитрий Душкин
                                    <span class="tooltiptext">Кандидат технических наук, научный сотрудник ИПУ РАН с
                    2008 по 2013. Пришёл в Яндекс.Картинки в 2014 году, отвечал за мобильную версию
                    и рост производительности сервиса. В 2016 перешёл в Yandex Data Factory, где
                    разрабатывает интерфейсы и дизайн веб-приложений для B2B.</span>
                                </div>
                            </div>
                        </td>
                        <td class="schedule-line__auditorium">
                            <div class="tooltip tooltip--left">
                                <div class="auditorium">4.Марс</div>
                                <span class="tooltiptext">Аудитория</span>
                            </div>
                        </td>
                        <td class="schedule-line__school">
                            <div id="school1" class="tooltip tooltip--left">
                                <div class='school'>ШРИ</div>
                                <span class="tooltiptext">Школа разработки интерфейсов</span>
                            </div>
                            <div id="school2" class="tooltip tooltip--left">
                                <div class='school'>ШМД</div>
                                <span class="tooltiptext">Школа мобильного дизайна</span>
                            </div>
                            <div id="school3" class="tooltip tooltip--left">
                                <div class='school'>ШМР</div>
                                <span class="tooltiptext">Школа мобильной разработки</span>
                            </div>
                        </td>
                    </tr>
                </table>
                <table class="schedule-line">
                    <tr>
                        <td class="schedule-line__datetime">
                            <span class="schedule-line__datetime__date">30</span>
                            <span class="schedule-line__datetime__time">13:00</span>
                        </td>
                        <td class="schedule-line__lecture schedule-line__lecture--past">
                            <div class="schedule-line__lecture__title">
                                <a href="#">Мультимедиа: возможности браузера</a>
                            </div>
                            <div class="schedule-line__lecturer">
                                <div id="lecturer2" class="tooltip tooltip--right">
                                    Максим Васильев
                                    <span class="tooltiptext">Во фронтенд-разработке с 2007 года. До 2013-го, 
                      когда пришёл в Яндекс, работал технологом в студии Лебедева и других компаниях.</span>
                                </div>
                            </div>
                            <td class="schedule-line__auditorium">
                                <div class="tooltip tooltip--left">
                                    <div class="auditorium">5.Аргентина-Ямайка</div>
                                    <span class="tooltiptext">Аудитория</span>
                                </div>
                            </td>
                            <td class="schedule-line__school">
                                <div id="school4" class="tooltip tooltip--left">
                                    <div class='school'>ШРИ</div>
                                    <span class="tooltiptext">Школа разработки интерфейсов</span>
                                </div>
                            </td>
                        </td>
                    </tr>
                </table>
            </div>
            <div id="nov2016" class="schedule-month">
                <div class="schedule-month-heading">
                    <span>ноябрь 2016</span>
                </div>
                <table class="schedule-line">
                    <tr>
                        <td class="schedule-line__datetime">
                            <span class="schedule-line__datetime__date">24</span>
                            <span class="schedule-line__datetime__time">17:00</span>
                        </td>
                        <td class="schedule-line__lecture schedule-line__lecture--past">
                            <div class="schedule-line__lecture__title">
                                <a href="#">Клиентская оптимизация: мобильные устройства и инструменты</a>
                            </div>
                            <div class="schedule-line__lecturer">
                                <div id="lecturer3" class="tooltip tooltip--right">
                                    Иван Карев
                                    <span class="tooltiptext">Окончил факультет ВМК (вычислительной математики и кибернетики) МГУ им. М.В. Ломоносова, занимается веб-программированием с 2007 года. Сначала делал админки для системы фильтрации трафика, затем — интерфейсы онлайн-карт для проекта Космоснимки. В Яндексе начинал с Народа и Я.ру, последние два года занимался главной страницей. В настоящее время специализируется на вопросах производительности: от серверного JS до оптимизации загрузки страницы на клиенте.</span>
                                </div>
                            </div>
                        </td>
                        <td class="schedule-line__auditorium">
                            <div class="tooltip tooltip--left">
                                <div class="auditorium">7.Нянек</div>
                                <span class="tooltiptext">Аудитория</span>
                            </div>
                        </td>
                        <td class="schedule-line__school">
                            <div id="school5" class="tooltip tooltip--left">
                                <div class='school'>ШРИ</div>
                                <span class="tooltiptext">Школа разработки интерфейсов</span>
                            </div>
                        </td>
                </table>
                <table class="schedule-line">
                    <tr>
                        <td class="schedule-line__datetime">
                            <span class="schedule-line__datetime__date">24</span>
                            <span class="schedule-line__datetime__time">19:00</span>
                        </td>
                        <td class="schedule-line__lecture schedule-line__lecture--past">
                            <div class="schedule-line__lecture__title">
                                <a href="#">Развите продукта</a>
                            </div>
                            <div class="schedule-line__lecturer">
                                <div id="lecturer4" class="tooltip tooltip--right">
                                    Андрей Гевак
                                    <span class="tooltiptext">В конце 2013 года команда сервиса Яндекс.Музыка начала разработку новой версии. Новой получилась не только «шкурка», то есть дизайн, но и сами возможности. Мы переосмыслили поведение пользователей на сайте и в приложении и иначе оценили потребность людей в новой музыке. В результате этого получилась нынешняя версия music.yandex.ru и её мобильные клиенты. В докладе я расскажу о том, как шёл процесс переосмысления, почему мы сделали именно так, как сделали, и что из этого всего вышло.</span>
                                </div>
                            </div>
                        </td>
                        <td class="schedule-line__auditorium">
                            <div class="tooltip tooltip--left">
                                <div class="auditorium">4.Апрель</div>
                                <span class="tooltiptext">Аудитория</span>
                            </div>
                        </td>
                        <td class="schedule-line__school">
                            <div id="school6" class="tooltip tooltip--left">
                                <div class='school'>ШМД</div>
                                <span class="tooltiptext">Школа мобильного дизайна</span>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
            <div id="aug2017" class="schedule-month">
                <div class="schedule-month-heading">
                    <span>август 2017</span>
                </div>
                <table class="schedule-line">
                    <tr>
                        <td class="schedule-line__datetime">
                            <span class="schedule-line__datetime__date">3</span>
                            <span class="schedule-line__datetime__time">16:00</span>
                        </td>
                        <td class="schedule-line__lecture">
                            <div class="schedule-line__lecture__title">
                                Природа операционных систем
                            </div>
                            <div class="schedule-line__lecturer">
                                <div id="lecturer5" class="tooltip tooltip--right">
                                    Николай Васюнин
                                    <span class="tooltiptext">Пришёл в Яндекс в 2014 году. Дизайнер продукта в музыкальных сервисах компании, 
                          участник команды разработки Яндекс.Радио.</span>
                                </div>
                            </div>
                        </td>
                        <td class="schedule-line__auditorium">
                            <div class="tooltip tooltip--left">
                                <div class="auditorium">6.Серафим</div>
                                <span class="tooltiptext">Аудитория</span>
                            </div>
                        </td>
                        <td class="schedule-line__school">
                            <div id="school7" class="tooltip tooltip--left">
                                <div class='school'>ШРИ</div>
                                <span class="tooltiptext">Школа разработки интерфейсов</span>
                            </div>
                            <div id="school8" class="tooltip tooltip--left">
                                <div class='school'>ШМД</div>
                                <span class="tooltiptext">Школа мобильного дизайна</span>
                            </div>
                            <div id="school9" class="tooltip tooltip--left">
                                <div class='school'>ШМР</div>
                                <span class="tooltiptext">Школа мобильной разработки</span>
                            </div>
                        </td>
                        </td>
                    </tr>
                </table>
                <table class="schedule-line">
                    <tr>
                        <td class="schedule-line__datetime">
                            <span class="schedule-line__datetime__date">23</span>
                            <span class="schedule-line__datetime__time">18:00</span>
                        </td>
                        <td class="schedule-line__lecture">
                            <div class="schedule-line__lecture__title">
                                Debugging &amp; Polishing
                            </div>
                            <div class="schedule-line__lecturer">
                                <div id="lecturer6" class="tooltip tooltip--right">
                                    Илья Сергеев
                                    <span class="tooltiptext">Разрабатывает приложения под мобильные платформы с 2009 года. За это время принял 
                                участие более чем в 30 законченных проектах под Android, iOS, и Windows Phone. В Яндексе с 2015 года, занимается разработкой КиноПоиска под Android и iOS.</span>
                                </div>
                            </div>
                        </td>
                        <td class="schedule-line__auditorium">
                            <div class="tooltip tooltip--left">
                                <div class="auditorium">2.Ствола</div>
                                <span class="tooltiptext">Аудитория</span>
                            </div>
                        </td>
                        <td class="schedule-line__school">
                            <div id="school10" class="tooltip tooltip--left">
                                <div class='school'>ШМР</div>
                                <span class="tooltiptext">Школа мобильной разработки</span>
                            </div>
                        </td>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <script>
    gatherDates();
    updateAuditoriumsSelect('auditoriumSelect');
    updateAuditoriumsSelect('lectureAuditorium');
    updateSchoolsSelect();
    fillTimeSelect();

    function makeArrayByClassName(className) {
        var elements = document.getElementsByClassName(className);
        var array = [];
        for (var i = 0; i < elements.length; i++) {
            if (array.indexOf(elements[i].textContent.trim()) === -1) {
                array.push(elements[i].textContent.trim());
            }
        }
        return array;
    }

    function updateAuditoriumsSelect(selectId) {
        var select = document.getElementById(selectId);
        var auditoriumsArray = makeArrayByClassName('auditorium');

        // clear select
        while (select.firstChild) {
            select.removeChild(select.firstChild);
        }

        auditoriumsArray.sort(function(a, b) {
            return a.localeCompare(b);
        });

        if (selectId === 'auditoriumSelect') {
            var opt = document.createElement('option');
            opt.value = 'любая';
            opt.innerHTML = 'любая';
            select.appendChild(opt);
        }

        // update select element with sorted auditoriums
        for (var i = 0; i < auditoriumsArray.length; i++) {
            var option = document.createElement('option');
            option.value = auditoriumsArray[i];
            option.innerHTML = auditoriumsArray[i];
            select.appendChild(option);
        }
    }

    function updateSchoolsSelect() {
        var select = document.getElementById('lectureSchool');
        var schoolsArray = makeArrayByClassName('school');

        while (select.firstChild) {
            select.removeChild(select.firstChild);
        }

        for (var i = 0; i < schoolsArray.length; i++) {
            var option = document.createElement('option');
            option.innerHTML = schoolsArray[i];
            select.appendChild(option);
        }
    }

    function fillTimeSelect() {
        var hour = document.getElementById('lectureHour');
        var minute = document.getElementById('lectureMinute');

        for (var i = 0; i < 24; i++) {
            var option = document.createElement('option');
            if (i > 9) {
                option.value = i;
                option.innerHTML = i;
            } else {
                option.value = '0' + i;
                option.innerHTML = '0' + i;
            }
            hour.appendChild(option);
        }
        for (var i = 0; i < 60; i++) {
            var option = document.createElement('option');
            if (i > 9) {
                option.value = i;
                option.innerHTML = i;
            } else {
                option.value = '0' + i;
                option.innerHTML = '0' + i;
            }
            minute.appendChild(option);
        }
    }

    function extractDates() {
        var dayStart = document.getElementById('startDay')
            .options[document.getElementById('startDay').selectedIndex].value;
        var monthStart = document.getElementById('startMonth')
            .options[document.getElementById('startMonth').selectedIndex].value;
        var yearStart = document.getElementById('startYear')
            .options[document.getElementById('startYear').selectedIndex].value;
        var dayEnd = document.getElementById('endDay')
            .options[document.getElementById('endDay').selectedIndex].value;
        var monthEnd = document.getElementById('endMonth')
            .options[document.getElementById('endMonth').selectedIndex].value;
        var yearEnd = document.getElementById('endYear')
            .options[document.getElementById('endYear').selectedIndex].value;

        return {
            dayStart: dayStart,
            monthStart: monthStart,
            yearStart: yearStart,
            dayEnd: dayEnd,
            monthEnd: monthEnd,
            yearEnd: yearEnd
        };
    }

    function callDisplayAuditoriumDateInterval() {
        var dates = extractDates();

        var startDate = new Date(dates['yearStart'] + '/' + dates['monthStart'] + '/' + dates['dayStart']);
        var endDate = new Date(dates['yearEnd'] + '/' + dates['monthEnd'] + '/' + dates['dayEnd']);
        var auditorium = document.getElementById('auditoriumSelect')
            .options[document.getElementById('auditoriumSelect').selectedIndex].value;

        displayAuditoriumDateInterval(auditorium, startDate, endDate);
    }

    function callAddLecture() {
        var day = document.getElementById('lectureDay')
            .options[document.getElementById('lectureDay').selectedIndex].value;
        var month = document.getElementById('lectureMonth')
            .options[document.getElementById('lectureMonth').selectedIndex].value;
        var year = document.getElementById('lectureYear')
            .options[document.getElementById('lectureYear').selectedIndex].value;
        var hour = document.getElementById('lectureHour')
            .options[document.getElementById('lectureHour').selectedIndex].value;
        var minute = document.getElementById('lectureMinute')
            .options[document.getElementById('lectureMinute').selectedIndex].value;
        var title = document.getElementById('lectureTitle').value;
        var lecturerName = document.getElementById('lecturerName').value;
        var lecturerAbout = document.getElementById('lecturerAbout').value;
        var school = document.getElementById('lectureSchool')
            .options[document.getElementById('lectureSchool').selectedIndex].value;
        var auditorium = document.getElementById('lectureAuditorium')
            .options[document.getElementById('lectureAuditorium').selectedIndex].value;

        var datetime = new Date(year + '/' + month + '/' + day + ' ' + hour + ':' + minute);
        var lecturer = {name: lecturerName, about: lecturerAbout};

        addLecture(datetime, title, lecturer, auditorium, school);
    }
    </script>
</body>

</html>
